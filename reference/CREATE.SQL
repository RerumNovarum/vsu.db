DELETE FROM D8_EXAMS;
DELETE FROM D8_STUDENT;
DELETE FROM D8_SUBJ_LECT;
DELETE FROM D8_LECTURER;
DELETE FROM D8_SUBJECT;
DELETE FROM D8_UNIVERSITY;

DROP TABLE D8_EXAMS;
DROP TABLE D8_STUDENT;
DROP TABLE D8_SUBJ_LECT;
DROP TABLE D8_LECTURER;
DROP TABLE D8_SUBJECT;
DROP TABLE D8_UNIVERSITY;


CREATE TABLE D8_UNIVERSITY (
  UNIV_ID    INTEGER PRIMARY KEY,
  UNIV_NAME  CHAR(96) NOT NULL UNIQUE,
  RATING     INTEGER,
  CITY       CHAR(20) NOT NULL
);

CREATE TABLE D8_SUBJECT (
   SUBJ_ID     INTEGER PRIMARY KEY,
   SUBJ_NAME   CHAR(32) NOT NULL,
   HOUR        INTEGER,
   SEMESTR     INTEGER
);

CREATE TABLE D8_LECTURER (
  LECTURER_ID INTEGER PRIMARY KEY,
  SURNAME     CHAR(20) NOT NULL,
  NAME        CHAR(20) NOT NULL,
  CITY        CHAR(20) NOT NULL,
  UNIV_ID     INTEGER REFERENCES D8_UNIVERSITY(UNIV_ID)
);

CREATE TABLE D8_SUBJ_LECT (
  LECTURER_ID  INTEGER REFERENCES D8_LECTURER(LECTURER_ID),
  SUBJ_ID      INTEGER REFERENCES D8_SUBJECT(SUBJ_ID)
);

CREATE TABLE D8_STUDENT (
  STUD_ID   INTEGER PRIMARY KEY,
  SURNAME   CHAR(20) NOT NULL,
  NAME      CHAR(20) NOT NULL,
  STIPEND   INTEGER,
  KURS      INTEGER NOT NULL,
  CITY      CHAR(20) NOT NULL,
  BIRTHDAY   DATE,
  UNIV_ID   INTEGER REFERENCES D8_UNIVERSITY(UNIV_ID)
);

CREATE TABLE D8_EXAMS (
  EXAM_ID    INTEGER PRIMARY KEY,
  STUD_ID    INTEGER REFERENCES D8_STUDENT(STUD_ID),
  SUBJ_ID    INTEGER REFERENCES D8_SUBJECT(SUBJ_ID),
  MARK       INTEGER,
  EXAM_DATE  DATE,
  CHECK ((MARK>=2) AND (MARK<=5))
);
